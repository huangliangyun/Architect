#### 问题
+ 常用的设计模式？
+ 工厂方法和抽象工厂的区别？
+ 装饰器和代理区别？
+ 策略模式场景？
+ 模板方法模式的场景？
+ 责任链模式的场景？
+ 装饰者模式场景？
+ 代理模式场景？
+ 观察者模式场景？
+ 单例模式理解？
+ 如何破坏一个单例？ 
+ 那种单例模式最安全？
+ 怎么实现一个线程一个单例？



#### 答案

+ 常用的设计模式？  
创建型模式：工厂，单例，原型  
结构型模式：适配器，装饰者，代理  
行为型模式：策略，模板方法，观察者  


+ 工厂方法和抽象工厂的区别？  
简单工厂：实现了对象的使用和创建的分离，需要包含判断逻辑  
工厂方法：增加了抽象工厂，所有的具体工厂继承自己的父类，体现了多态，创建对象的细节封装在具体的工厂内部。是简单工厂的升级，简单工厂违反了开闭原则  
抽象工厂：工厂方法的进一步延伸，增加了产品族，每个工厂都比如一个公司，每个公司都有自己的产品。  
https://blog.csdn.net/jerry11112/article/details/80618420  


+ 装饰器和代理区别？  
1）不影响当前代码实现增强，在目标方法之前之后进行处理；  
2）装饰者关注在一个对象上动态添加方法，代理模式关注控制对象的访问；  
3）使用场景不一样，实现多级缓存可以使用装饰者，实现 AOP 的功能可以使用代理；  

+ 策略模式的理解？  
联合登录，支付，调用第三方接口等场景，返回的结果相同，执行的算法策略不同，动态维护每一个策略的算法。  


+ 模板方法模式的理解？  
提供共同的骨架，相同的代码放到父类，不同的方法交给子类去实现。  


+ 责任链模式的理解？  
客户端发出请求后，整条链上的对象都会执行一次，网关，过滤器，风控系统等场景。  


+ 装饰者模式的理解？  
不影响当前代码实现增强，如多级缓存的设计，IO 流。  


+ 代理模式的理解？  
在目标方法之前之后进行处理，场景如 AOP，MyBatis 的 Mapper 对象，事务，日志，RPC 远程调用。  
静态代理：自己编写代理类；类型有：继承，聚合；   
动态代理：使用反射或者字节码技术生成代理类；类型有：JDK，CGLIB；JDK 动态代理使用反射技术回调，CGLIB 使用字节码技术调用，  
JDK 使用广泛，面向接口编程，CGLIB 效率高。  


+ 观察者模式的理解？  
对事件进行监听，生产者消费者模式，场景有 MQ，Zookeeper，配置中心。  


+ 单例模式理解？
保证应用中只有一个实例，有 7 种创建方式；  
应用场景如配置文件，SpringBean ，Servlet。  
饿汉模式：线程安全，项目启动提前创建好，但造成项目启动较慢。  
懒汉模式，线程不安全，需要时才会创建，我们可以加锁解决线程安全问题。  


+ 如何破坏一个单例？  
反射，序列化(把一个对象序列化到硬盘中的过程，反序列化是从硬盘中序列化对象) 。  


+ 那种单例模式最安全？  
枚举单例，类加载时初始化，静态代码块模式；不能被反射和序列化，所以最安全。  
https://blog.csdn.net/weixin_33804990/article/details/92398414?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1  


+ 怎么实现一个线程一个单例？  
ThreadLocal 实现单例。  