#### 问题

+ 请问什么是死锁(deadlock)?
+ MyISAM 和 InnoDB 其区别？
+ 为什么MyISAM会比Innodb的查询速度快？
+ 数据库的三范式？
+ 索引使用注意事项？
+ SQL 优化？
+ 创建索引应该注意些什么？
+ char 和 varchar 的区别是什么？
+ MySQL 各种索引区别？
+ 什么是视图，游标是什么？
+ 内连接，自连接，外连接，交叉连接的区别？
+ 什么是MVCC?


#### 答案

+ 请问什么是死锁(deadlock)?  
死锁是两个或两个以上的进程在执行中，由于竞争资源或者彼此通信所造成的的一种等待现象，如果没有外力，他们都将无法进行下去。死锁产生有四个条件，打破任意一个，都能打破死锁，1、互斥条件，2、请求和保持，3、不可剥夺，4、循环等待 。


+ MyISAM 和 InnoDB 其区别？  
1）事务：MyISAM不支持，InnoDB支持  
2）锁级别：MyISAM是表锁，不支持外键，InnoDB是行锁和外键约束，InnoDB 的行锁是通过给索引加锁实现的，只有通过索引条件检索数据，InnoDB 才使用行锁，否则使用表锁  
3）索引：MyISAM 采用非聚集索引，B+树叶子节点存储指向数据文件地址的指针，InnoDB是使用聚集索引，B+树叶子存储数据。  
4）场景：MYISAM适合大量查询频繁，插入不频繁，没有事务的操作  
InnoDB适合可靠性要求比较高，要求事务大量插入和更新的语句。  

+ 为什么 MyISAM 会比 Innodb 的查询速度快？  
1）MyISAM 保存表的行数，Innodb 不保存表的行数。  
2）Innodb 还需要维护 MVCC 一致。  
3）Innodb 寻址要映射到块，再到行，MyISAM 记录的直接是文件的 OFFSET，定位比 Innodb 要快。  
4）Innodb 要缓存数据块，MyISAM 只缓存索引块， 这中间还有换进换出的减少；  


+ 数据库的三范式？  
1）每一列保证原子性  
2）表中每列都和主键相关  
3）每列都和主键直接相关，不是间接相关  


+ 索引使用注意事项？  
1）不要在where上使用函数，计算，会导致全表扫描  
2）不要使用!=、not in、or、<>等操作符，会导致全表扫描  
3）复合索引最左原则，在查询条件中使用复合索引的第一个字段，索引才会被使用  
4）查询中某个列有范围查询，右边的列都无法使用索引优化查找  
5）索引不会含有包含 null 值的列，复合索引只要有一列有 null 值，那么这一列对于复合索引就是无效的。  
6）like %sss 不会使用索引，会使用全表扫描，可以使用 ES   


+ SQL 优化？  
1）建立索引  
2）减少表之间的关联  
3）SQL优化  
不要在列上使用函数或者进行计算  
避免使用!=、not in、<>、or  
符合索引遵循最左原则  
查询中某列有范围查询，右边索引的列都无法使用索引优化 
like %xxx 索引会失效  
避免使用select*  
4）分表分库  


+ 创建索引应该注意些什么？  
1）唯一，不为空，经常被查询到的字段  


+ char 和 varchar 的区别是什么？  
1）char 的长度是不可变的，用空格填充指定长度大小，而 varchar 的长度是可变的。  
2）char 对英文字符占一个字节，一个汉字占 2 个字节，varchar 每个英文字符占 2 个字节，汉字也占 2 个字节。  


+ MySQL 各种索引区别？  
索引：不允许为空  
唯一索引：保证数据记录的唯一性，唯一索引允许空值  
主键：特殊的唯一索引，一张表只能定义一个主键  
外键：表的外键是另一张表的主键  
组合索引：组合索引可以覆盖多个数据列   
全文索引：可以在 varchar 或者 text 类型的列上创建    


+ 什么是视图，游标是什么？  
视图是虚拟的表，通常是一个表或者多个表的行或列的子集，具有和物理表相同的功能。  
游标是对查询出来的结果集作为一个单元来有效处理。一般不使用游标，但是需要逐条处理数据的时候，游标显得十分重要。  


+ 内连接，自连接，外连接，交叉连接的区别？  


+ 什么是MVCC?  
英文全称为 Multi-Version Concurrency Control，多版本并发控制，通过把数据保存在某个时间点的快照来实现，这意味着一个事务无论运行多长时间，在同一个事务里能够看到数据一致的视图。